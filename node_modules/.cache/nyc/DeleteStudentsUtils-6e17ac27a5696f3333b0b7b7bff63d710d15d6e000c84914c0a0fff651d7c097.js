function cov_i4kde1i8(){var path="C:\\Users\\65804\\dvops\\Project-part2\\utils\\DeleteStudentsUtils.js";var hash="5381fb502c4a9c8ea870506630ce54cfd6254510";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\65804\\dvops\\Project-part2\\utils\\DeleteStudentsUtils.js",statementMap:{"0":{start:{line:1,column:20},end:{line:1,column:48}},"1":{start:{line:2,column:11},end:{line:2,column:33}},"2":{start:{line:6,column:4},end:{line:44,column:5}},"3":{start:{line:7,column:19},end:{line:7,column:32}},"4":{start:{line:10,column:8},end:{line:12,column:9}},"5":{start:{line:11,column:12},end:{line:11,column:85}},"6":{start:{line:15,column:8},end:{line:15,column:67}},"7":{start:{line:17,column:28},end:{line:17,column:65}},"8":{start:{line:20,column:8},end:{line:22,column:9}},"9":{start:{line:21,column:12},end:{line:21,column:88}},"10":{start:{line:24,column:30},end:{line:24,column:48}},"11":{start:{line:25,column:33},end:{line:25,column:81}},"12":{start:{line:25,column:63},end:{line:25,column:80}},"13":{start:{line:28,column:8},end:{line:30,column:9}},"14":{start:{line:29,column:12},end:{line:29,column:74}},"15":{start:{line:32,column:8},end:{line:32,column:65}},"16":{start:{line:34,column:8},end:{line:37,column:11}},"17":{start:{line:39,column:8},end:{line:39,column:68}},"18":{start:{line:40,column:8},end:{line:43,column:11}},"19":{start:{line:47,column:0},end:{line:47,column:34}}},fnMap:{"0":{name:"deleteStudent",decl:{start:{line:5,column:15},end:{line:5,column:28}},loc:{start:{line:5,column:39},end:{line:45,column:1}},line:5},"1":{name:"(anonymous_1)",decl:{start:{line:25,column:52},end:{line:25,column:53}},loc:{start:{line:25,column:63},end:{line:25,column:80}},line:25}},branchMap:{"0":{loc:{start:{line:10,column:8},end:{line:12,column:9}},type:"if",locations:[{start:{line:10,column:8},end:{line:12,column:9}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:10},"1":{loc:{start:{line:10,column:12},end:{line:10,column:35}},type:"binary-expr",locations:[{start:{line:10,column:12},end:{line:10,column:15}},{start:{line:10,column:19},end:{line:10,column:35}}],line:10},"2":{loc:{start:{line:20,column:8},end:{line:22,column:9}},type:"if",locations:[{start:{line:20,column:8},end:{line:22,column:9}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:20},"3":{loc:{start:{line:28,column:8},end:{line:30,column:9}},type:"if",locations:[{start:{line:28,column:8},end:{line:30,column:9}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:28}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0},f:{"0":0,"1":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"5381fb502c4a9c8ea870506630ce54cfd6254510"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_i4kde1i8=function(){return actualCoverage;};}return actualCoverage;}cov_i4kde1i8();const{Student}=(cov_i4kde1i8().s[0]++,require('../models/Student'));const fs=(cov_i4kde1i8().s[1]++,require('fs').promises);async function deleteStudent(req,res){cov_i4kde1i8().f[0]++;cov_i4kde1i8().s[2]++;try{const id=(cov_i4kde1i8().s[3]++,req.params.id);// Comprehensive ID validation
cov_i4kde1i8().s[4]++;if((cov_i4kde1i8().b[1][0]++,!id)||(cov_i4kde1i8().b[1][1]++,id.trim()==='')){cov_i4kde1i8().b[0][0]++;cov_i4kde1i8().s[5]++;return res.status(400).json({message:'Valid student ID is required'});}else{cov_i4kde1i8().b[0][1]++;}// Logging for tracking
cov_i4kde1i8().s[6]++;console.log(`Attempting to delete student with ID: ${id}`);const allStudents=(cov_i4kde1i8().s[7]++,await readJSON('utils/students.json'));// Check if student list is empty
cov_i4kde1i8().s[8]++;if(allStudents.length===0){cov_i4kde1i8().b[2][0]++;cov_i4kde1i8().s[9]++;return res.status(404).json({message:'No students available to delete'});}else{cov_i4kde1i8().b[2][1]++;}const initialLength=(cov_i4kde1i8().s[10]++,allStudents.length);const filteredStudents=(cov_i4kde1i8().s[11]++,allStudents.filter(student=>{cov_i4kde1i8().f[1]++;cov_i4kde1i8().s[12]++;return student.id!==id;}));// Check if student was actually deleted
cov_i4kde1i8().s[13]++;if(filteredStudents.length===initialLength){cov_i4kde1i8().b[3][0]++;cov_i4kde1i8().s[14]++;return res.status(404).json({message:'Student not found'});}else{cov_i4kde1i8().b[3][1]++;}cov_i4kde1i8().s[15]++;await writeJSON(filteredStudents,'utils/students.json');cov_i4kde1i8().s[16]++;return res.status(200).json({message:'Student deleted successfully!',remainingStudents:filteredStudents.length});}catch(error){cov_i4kde1i8().s[17]++;console.error('Comprehensive delete student error:',error);cov_i4kde1i8().s[18]++;return res.status(500).json({message:'Server error during student deletion',error:error.message});}}cov_i4kde1i8().s[19]++;module.exports={deleteStudent};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfaTRrZGUxaTgiLCJhY3R1YWxDb3ZlcmFnZSIsIlN0dWRlbnQiLCJzIiwicmVxdWlyZSIsImZzIiwicHJvbWlzZXMiLCJkZWxldGVTdHVkZW50IiwicmVxIiwicmVzIiwiZiIsImlkIiwicGFyYW1zIiwiYiIsInRyaW0iLCJzdGF0dXMiLCJqc29uIiwibWVzc2FnZSIsImNvbnNvbGUiLCJsb2ciLCJhbGxTdHVkZW50cyIsInJlYWRKU09OIiwibGVuZ3RoIiwiaW5pdGlhbExlbmd0aCIsImZpbHRlcmVkU3R1ZGVudHMiLCJmaWx0ZXIiLCJzdHVkZW50Iiwid3JpdGVKU09OIiwicmVtYWluaW5nU3R1ZGVudHMiLCJlcnJvciIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJEZWxldGVTdHVkZW50c1V0aWxzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgU3R1ZGVudCB9ID0gcmVxdWlyZSgnLi4vbW9kZWxzL1N0dWRlbnQnKTtcclxuY29uc3QgZnMgPSByZXF1aXJlKCdmcycpLnByb21pc2VzO1xyXG5cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVN0dWRlbnQocmVxLCByZXMpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgaWQgPSByZXEucGFyYW1zLmlkO1xyXG5cclxuICAgICAgICAvLyBDb21wcmVoZW5zaXZlIElEIHZhbGlkYXRpb25cclxuICAgICAgICBpZiAoIWlkIHx8IGlkLnRyaW0oKSA9PT0gJycpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ1ZhbGlkIHN0dWRlbnQgSUQgaXMgcmVxdWlyZWQnIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gTG9nZ2luZyBmb3IgdHJhY2tpbmdcclxuICAgICAgICBjb25zb2xlLmxvZyhgQXR0ZW1wdGluZyB0byBkZWxldGUgc3R1ZGVudCB3aXRoIElEOiAke2lkfWApO1xyXG5cclxuICAgICAgICBjb25zdCBhbGxTdHVkZW50cyA9IGF3YWl0IHJlYWRKU09OKCd1dGlscy9zdHVkZW50cy5qc29uJyk7XHJcblxyXG4gICAgICAgIC8vIENoZWNrIGlmIHN0dWRlbnQgbGlzdCBpcyBlbXB0eVxyXG4gICAgICAgIGlmIChhbGxTdHVkZW50cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ05vIHN0dWRlbnRzIGF2YWlsYWJsZSB0byBkZWxldGUnIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgaW5pdGlhbExlbmd0aCA9IGFsbFN0dWRlbnRzLmxlbmd0aDtcclxuICAgICAgICBjb25zdCBmaWx0ZXJlZFN0dWRlbnRzID0gYWxsU3R1ZGVudHMuZmlsdGVyKHN0dWRlbnQgPT4gc3R1ZGVudC5pZCAhPT0gaWQpO1xyXG5cclxuICAgICAgICAvLyBDaGVjayBpZiBzdHVkZW50IHdhcyBhY3R1YWxseSBkZWxldGVkXHJcbiAgICAgICAgaWYgKGZpbHRlcmVkU3R1ZGVudHMubGVuZ3RoID09PSBpbml0aWFsTGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdTdHVkZW50IG5vdCBmb3VuZCcgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBhd2FpdCB3cml0ZUpTT04oZmlsdGVyZWRTdHVkZW50cywgJ3V0aWxzL3N0dWRlbnRzLmpzb24nKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdTdHVkZW50IGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5IScsIFxyXG4gICAgICAgICAgICByZW1haW5pbmdTdHVkZW50czogZmlsdGVyZWRTdHVkZW50cy5sZW5ndGggXHJcbiAgICAgICAgfSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0NvbXByZWhlbnNpdmUgZGVsZXRlIHN0dWRlbnQgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IFxyXG4gICAgICAgICAgICBtZXNzYWdlOiAnU2VydmVyIGVycm9yIGR1cmluZyBzdHVkZW50IGRlbGV0aW9uJywgXHJcbiAgICAgICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlIFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHsgZGVsZXRlU3R1ZGVudH07Il0sIm1hcHBpbmdzIjoiaWdHQWVZO0FBQUFBLFlBQUEsU0FBQUEsQ0FBQSxTQUFBQyxjQUFBLFdBQUFBLGNBQUEsRUFBQUQsWUFBQSxHQWZaLEtBQU0sQ0FBRUUsT0FBUSxDQUFDLEVBQUFGLFlBQUEsR0FBQUcsQ0FBQSxNQUFHQyxPQUFPLENBQUMsbUJBQW1CLENBQUMsRUFDaEQsS0FBTSxDQUFBQyxFQUFFLEVBQUFMLFlBQUEsR0FBQUcsQ0FBQSxNQUFHQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUNFLFFBQVEsRUFHakMsY0FBZSxDQUFBQyxhQUFhQSxDQUFDQyxHQUFHLENBQUVDLEdBQUcsQ0FBRSxDQUFBVCxZQUFBLEdBQUFVLENBQUEsTUFBQVYsWUFBQSxHQUFBRyxDQUFBLE1BQ25DLEdBQUksQ0FDQSxLQUFNLENBQUFRLEVBQUUsRUFBQVgsWUFBQSxHQUFBRyxDQUFBLE1BQUdLLEdBQUcsQ0FBQ0ksTUFBTSxDQUFDRCxFQUFFLEVBRXhCO0FBQUFYLFlBQUEsR0FBQUcsQ0FBQSxNQUNBLEdBQUksQ0FBQUgsWUFBQSxHQUFBYSxDQUFBLFVBQUNGLEVBQUUsSUFBQVgsWUFBQSxHQUFBYSxDQUFBLFNBQUlGLEVBQUUsQ0FBQ0csSUFBSSxDQUFDLENBQUMsR0FBSyxFQUFFLEVBQUUsQ0FBQWQsWUFBQSxHQUFBYSxDQUFBLFNBQUFiLFlBQUEsR0FBQUcsQ0FBQSxNQUN6QixNQUFPLENBQUFNLEdBQUcsQ0FBQ00sTUFB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